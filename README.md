# EDA manufacturing project
***

## Contents

<details>
  <summary>Table of Contents</summary>
  <ol>
    <li>
      <a href="#project-description">Project description</a>
    </li>
    <li>
      <a href="#installation-instructions">Installation instructions</a>
    </li>
    <li>
      <a href="#python-libraries">Python libraries</a>
    </li>
    <li>
      <a href="#github-repository-structure">Github repository structure</a>
    </li>
    <li><a href="#file-information">File information</a>
        <ul>
        <li><a href="#eda-notebook-sections">EDA notebook sections</a></li>
        </ul>
    </li>
    <li>
      <a href="#data-extraction">Data extraction</a>
    </li>
    <li>
      <a href="#data-transformation">Data transformation</a>
    </li>
    <li>
      <a href="#analysis">Analysis</a>
    </li>
    <li>
      <a href="#findings">Findings</a>
    </li>
  </ol>
</details>

***
<!-- PROJECT DESCRIPTION -->
## Project description

This project is to optimise a manufacturing machine process for a large industrial company. We extract data on to the local computer from an RDS database. The data is then cleaned, analysed and visualised. Conclusions are then drawn on how the manufacturing machine can be run with minimal failures.

***
<!-- INSTALLATION INSTRUCTIONS -->
## Installation instructions

Clone the github repostory by running the following command in a terminal.
```
git clone https://github.com/sgrayner/EDA-Manufacturing.git
```

***
<!-- PYTHON LIBRARIES -->
## Python libraries

- numpy
- pandas
- scipy
- matplotlib
- plotly.express
- statsmodels
- sqlalchemy
- yaml

***
<!-- GITHUB REPOSITORY STRUCTURE -->
## Github repository structure

```
│   ├── EDA_process.ipynb
│   │── README.md
│   ├── data_analysis.py
│   ├── data_cleaning.py
│   │── db_utils.py
│   ├── failure_data.csv
```

***
<!-- FILE INFORMATION -->
## File information

- **README.md** contains project information and information on the variables, code and conclusions made within the project.
- **EDA_process.ipynb** will walk you through the exploratory data analysis process. Run the code blocks from the beginning to run the EDA process on the data.
- **db_utils.py** contains the functions for connecting to the RDS database and extracting the data.
- **data_cleaning.py** contains functions for transforming the data to prepare it for analysis.
- **data_analysis.py** contains functions for analysing and visualising the data to extract information.
- **failure_data.csv** contains the data.

<!-- EDA NOTEBOOK SECTIONS -->
### EDA notebook sections

- Importing python libraries
- **Extracting and cleaning the data** - extracting the data, investigating column quality, cleaning the data.
- **Preparing the data** - investigating correlation, null value imputation, skew transformation, outlier detection, collinearity detection.
- **Analysing the data** - investigating operating ranges of the variables, visualising machine failures against explanatory variables.

***
<!-- DATA EXTRACTION -->
## Data extraction

We extract the data from an RDS database:
```
conn = du.DatabaseConnector('credentials.yaml')
df = conn.read_rds_table(table='failure_data')
```
This dataframe has 10000 records and 14 columns:

![Database columns](https://github.com/sgrayner/EDA-Manufacturing/blob/master/images/df_columns.png)

- **UDI**: Unique identifier of the machining session.
- **Product ID**: Product specific serial number.
- **Type**: Quality of the product being created (L, M, or H, for low, medium and high quality products).
- **Air temperature [K]**: Average air temperature in the room during the process (in Kelvin).
- **Process temperature [K]**: Average air temperature the machine was operating at during production (in Kelvin).
- **Rotational speed [rpm]**: Average revolutions per minute the tool was operating at (in revolutions per minute).
- **Torque [Nm]**: Torque generated by the tool (in Newton meters).
- **Tool wear [min]**: The current minutes of wear on the tool. H, M and L product manufacturing cause 5/3/2 minutes of tool wear.
- **Machine failure**: Boolean value that indicates, whether the machine failed this particular run.
- **TWF**: (tool wear failure) Boolean value indicating failure in the process due to the tool wearing out.
- **HDF**: (heat dissipation failure) Boolean value indicating failure due to lack of heat dissipation.
- **PWF**: (power failure): Boolean value indicating failure due to lack of power transfer to the machine.
- **OSF**: (overstrain failure) Boolean value indicating failure due to the machine overstraining.
- **RNF**: (random failures) Boolean value indicating failures which could not be categorised.
<br>

***
<!-- DATA TRANSFORMATION -->
## Data transformation

These steps are applied to the dataframe to prepare it for analysis:

<img align="right" src="https://github.com/sgrayner/EDA-Manufacturing/blob/master/images/correlation_heatmap.png" alt="Correlation heatmap" width="500"/>

- Convert the 'Type' column to category type.
- Impute null values in 'Air temperature \[K\]' and 'Process temperature \[K\]' using linear regression functions.
- Impute null values in 'Tool wear \[min\]' with the mean value.
- Apply a Box-Cox transform to the 'Rotational speed \[rpm\]' column.
- Check for outliers in variables using boxplot visuals.
- Remove outliers more than three standard deviations from the mean.
- Use an ordinary least squares (OLS) method and a variation inflation factor to check collinearity between variables.
- Remove 'Rotational speed \[rpm\]' due to collinearity.

***
<!-- ANALYSIS -->
## Analysis

- A table showing the minimum and maximum values of the independent variables for manufacturing high, medium and low quality products.

<img align="right" src="https://github.com/sgrayner/EDA-Manufacturing/blob/master/images/ranges_table.png" alt="Correlation heatmap" width="400"/>

- An array of bar charts, displaying:
  - Total machine successes and failures.
  - Total machine failures for each product quality type.
  - Total failures of each failure type.
  - Total failures by each failure type broken down by product quality type.
 
<br clear="all"/> <!-- Clears the alignment of images -->
---

 - A histogram of the count of a specific failure type superimposed over a histogram of a specific variable. E.g. 'HDF' over 'Process temperature \[K\]'.

<img align="left" src="https://github.com/sgrayner/EDA-Manufacturing/blob/master/images/grouped_bar_chart.png" alt="Grouped bar chart" width="500"/>

<img align="right" src="https://github.com/sgrayner/EDA-Manufacturing/blob/master/images/HDF_Process_temp.png" alt="HDF and process temperature" width="400"/>

<br clear="all"/> <!-- Clears the alignment of images -->
---

***
<!-- FINDINGS -->
## Findings

- Torque must be kept between 10 Nm and 42 Nm to prevent HDF, PWF and OSF
- Tool wear must be below 175 min to prevent TWF and OSF.
- Air temperature should be kept below 300 K to prevent HDF.
- Process temperature should be kept below 309.5 K to prevent HDF.
